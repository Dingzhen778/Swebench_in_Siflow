>>>>> Start Test Output
+ export PYTHONPATH=/testbed:
+ PYTHONPATH=/testbed:
+ echo PYTHONPATH=/testbed:
PYTHONPATH=/testbed:
+ pytest -rA lib/matplotlib/tests/test_dates.py
============================= test session starts ==============================
platform linux -- Python 3.8.20, pytest-8.3.5, pluggy-1.5.0
rootdir: /testbed
configfile: pytest.ini
plugins: rerunfailures-14.0, xdist-3.6.1, timeout-2.4.0, cov-5.0.0
collected 77 items

lib/matplotlib/tests/test_dates.py ................................FF... [ 48%]
FF..............FF......................                                 [100%]

=================================== FAILURES ===================================
___________________________ test_DateFormatter[png] ____________________________

args = ()
kwds = {'extension': 'png', 'request': <FixtureRequest for <Function test_DateFormatter[png]>>}

    @wraps(func)
    def inner(*args, **kwds):
        with self._recreate_cm():
>           return func(*args, **kwds)
E           matplotlib.testing.exceptions.ImageComparisonFailure: images not close (RMS 16.408):
E           	result_images/test_dates/DateFormatter_fractionalSeconds.png
E           	result_images/test_dates/DateFormatter_fractionalSeconds-expected.png
E           	result_images/test_dates/DateFormatter_fractionalSeconds-failed-diff.png

/opt/miniconda3/envs/testbed/lib/python3.8/contextlib.py:75: ImageComparisonFailure
__________________________ test_locator_set_formatter __________________________

    def test_locator_set_formatter():
        """
        Test if setting the locator only will update the AutoDateFormatter to use
        the new locator.
        """
        plt.rcParams["date.autoformatter.minute"] = "%d %H:%M"
        t = [datetime.datetime(2018, 9, 30, 8, 0),
             datetime.datetime(2018, 9, 30, 8, 59),
             datetime.datetime(2018, 9, 30, 10, 30)]
        x = [2, 3, 1]
    
        fig, ax = plt.subplots()
        ax.plot(t, x)
        ax.xaxis.set_major_locator(mdates.MinuteLocator((0, 30)))
        fig.canvas.draw()
        ticklabels = [tl.get_text() for tl in ax.get_xticklabels()]
        expected = ['30 08:00', '30 08:30', '30 09:00',
                    '30 09:30', '30 10:00', '30 10:30']
>       assert ticklabels == expected
E       AssertionError: assert ['30 08\\:00'... '30 10\\:30'] == ['30 08:00', ...', '30 10:30']
E         
E         At index 0 diff: '30 08\\:00' != '30 08:00'
E         Use -v to get more diff

lib/matplotlib/tests/test_dates.py:297: AssertionError
_________________ test_date_formatter_usetex[delta2-expected2] _________________

delta = datetime.timedelta(seconds=72000)
expected = ['$\\mathdefault{01{-}01\\;00}$', '$\\mathdefault{01{-}01\\;02}$', '$\\mathdefault{01{-}01\\;04}$', '$\\mathdefault{01{-}01\\;06}$', '$\\mathdefault{01{-}01\\;08}$', '$\\mathdefault{01{-}01\\;10}$', ...]

    @pytest.mark.parametrize('delta, expected', [
        (datetime.timedelta(weeks=52 * 200),
         [r'$\mathdefault{%d}$' % year for year in range(1990, 2171, 20)]),
        (datetime.timedelta(days=30),
         [r'$\mathdefault{1990{-}01{-}%02d}$' % day for day in range(1, 32, 3)]),
        (datetime.timedelta(hours=20),
         [r'$\mathdefault{01{-}01\;%02d}$' % hour for hour in range(0, 21, 2)]),
        (datetime.timedelta(minutes=10),
         [r'$\mathdefault{01\;00{:}%02d}$' % minu for minu in range(0, 11)]),
    ])
    def test_date_formatter_usetex(delta, expected):
        style.use("default")
    
        d1 = datetime.datetime(1990, 1, 1)
        d2 = d1 + delta
    
        locator = mdates.AutoDateLocator(interval_multiples=False)
        locator.create_dummy_axis()
        locator.axis.set_view_interval(mdates.date2num(d1), mdates.date2num(d2))
    
        formatter = mdates.AutoDateFormatter(locator, usetex=True)
>       assert [formatter(loc) for loc in locator()] == expected
E       AssertionError: assert ['$\\mathdefa...01 10}$', ...] == ['$\\mathdefa...\\;10}$', ...]
E         
E         At index 0 diff: '$\\mathdefault{01{-}01 00}$' != '$\\mathdefault{01{-}01\\;00}$'
E         Use -v to get more diff

lib/matplotlib/tests/test_dates.py:345: AssertionError
_________________ test_date_formatter_usetex[delta3-expected3] _________________

delta = datetime.timedelta(seconds=600)
expected = ['$\\mathdefault{01\\;00{:}00}$', '$\\mathdefault{01\\;00{:}01}$', '$\\mathdefault{01\\;00{:}02}$', '$\\mathdefault{01\\;00{:}03}$', '$\\mathdefault{01\\;00{:}04}$', '$\\mathdefault{01\\;00{:}05}$', ...]

    @pytest.mark.parametrize('delta, expected', [
        (datetime.timedelta(weeks=52 * 200),
         [r'$\mathdefault{%d}$' % year for year in range(1990, 2171, 20)]),
        (datetime.timedelta(days=30),
         [r'$\mathdefault{1990{-}01{-}%02d}$' % day for day in range(1, 32, 3)]),
        (datetime.timedelta(hours=20),
         [r'$\mathdefault{01{-}01\;%02d}$' % hour for hour in range(0, 21, 2)]),
        (datetime.timedelta(minutes=10),
         [r'$\mathdefault{01\;00{:}%02d}$' % minu for minu in range(0, 11)]),
    ])
    def test_date_formatter_usetex(delta, expected):
        style.use("default")
    
        d1 = datetime.datetime(1990, 1, 1)
        d2 = d1 + delta
    
        locator = mdates.AutoDateLocator(interval_multiples=False)
        locator.create_dummy_axis()
        locator.axis.set_view_interval(mdates.date2num(d1), mdates.date2num(d2))
    
        formatter = mdates.AutoDateFormatter(locator, usetex=True)
>       assert [formatter(loc) for loc in locator()] == expected
E       AssertionError: assert ['$\\mathdefa...00:05}$', ...] == ['$\\mathdefa...{:}05}$', ...]
E         
E         At index 0 diff: '$\\mathdefault{01 00:00}$' != '$\\mathdefault{01\\;00{:}00}$'
E         Use -v to get more diff

lib/matplotlib/tests/test_dates.py:345: AssertionError
______________ test_concise_formatter_usetex[t_delta2-expected2] _______________

t_delta = datetime.timedelta(days=1, seconds=57600)
expected = ['Jan$\\mathdefault{{-}01}$', '$\\mathdefault{04{:}00}$', '$\\mathdefault{08{:}00}$', '$\\mathdefault{12{:}00}$', '$\\mathdefault{16{:}00}$', '$\\mathdefault{20{:}00}$', ...]

    @pytest.mark.parametrize('t_delta, expected', [
        (datetime.timedelta(weeks=52 * 200),
         ['$\\mathdefault{%d}$' % (t, ) for t in range(1980, 2201, 20)]),
        (datetime.timedelta(days=40),
         ['Jan', '$\\mathdefault{05}$', '$\\mathdefault{09}$',
          '$\\mathdefault{13}$', '$\\mathdefault{17}$', '$\\mathdefault{21}$',
          '$\\mathdefault{25}$', '$\\mathdefault{29}$', 'Feb',
          '$\\mathdefault{05}$', '$\\mathdefault{09}$']),
        (datetime.timedelta(hours=40),
         ['Jan$\\mathdefault{{-}01}$', '$\\mathdefault{04{:}00}$',
          '$\\mathdefault{08{:}00}$', '$\\mathdefault{12{:}00}$',
          '$\\mathdefault{16{:}00}$', '$\\mathdefault{20{:}00}$',
          'Jan$\\mathdefault{{-}02}$', '$\\mathdefault{04{:}00}$',
          '$\\mathdefault{08{:}00}$', '$\\mathdefault{12{:}00}$',
          '$\\mathdefault{16{:}00}$']),
        (datetime.timedelta(seconds=2),
         ['$\\mathdefault{59.5}$', '$\\mathdefault{00{:}00}$',
          '$\\mathdefault{00.5}$', '$\\mathdefault{01.0}$',
          '$\\mathdefault{01.5}$', '$\\mathdefault{02.0}$',
          '$\\mathdefault{02.5}$']),
    ])
    def test_concise_formatter_usetex(t_delta, expected):
        d1 = datetime.datetime(1997, 1, 1)
        d2 = d1 + t_delta
    
        locator = mdates.AutoDateLocator(interval_multiples=True)
        locator.create_dummy_axis()
        locator.axis.set_view_interval(mdates.date2num(d1), mdates.date2num(d2))
    
        formatter = mdates.ConciseDateFormatter(locator, usetex=True)
>       assert formatter.format_ticks(locator()) == expected
E       AssertionError: assert ['Jan$\\mathd...20:00}$', ...] == ['Jan$\\mathd...{:}00}$', ...]
E         
E         At index 1 diff: '$\\mathdefault{04:00}$' != '$\\mathdefault{04{:}00}$'
E         Use -v to get more diff

lib/matplotlib/tests/test_dates.py:637: AssertionError
______________ test_concise_formatter_usetex[t_delta3-expected3] _______________

t_delta = datetime.timedelta(seconds=2)
expected = ['$\\mathdefault{59.5}$', '$\\mathdefault{00{:}00}$', '$\\mathdefault{00.5}$', '$\\mathdefault{01.0}$', '$\\mathdefault{01.5}$', '$\\mathdefault{02.0}$', ...]

    @pytest.mark.parametrize('t_delta, expected', [
        (datetime.timedelta(weeks=52 * 200),
         ['$\\mathdefault{%d}$' % (t, ) for t in range(1980, 2201, 20)]),
        (datetime.timedelta(days=40),
         ['Jan', '$\\mathdefault{05}$', '$\\mathdefault{09}$',
          '$\\mathdefault{13}$', '$\\mathdefault{17}$', '$\\mathdefault{21}$',
          '$\\mathdefault{25}$', '$\\mathdefault{29}$', 'Feb',
          '$\\mathdefault{05}$', '$\\mathdefault{09}$']),
        (datetime.timedelta(hours=40),
         ['Jan$\\mathdefault{{-}01}$', '$\\mathdefault{04{:}00}$',
          '$\\mathdefault{08{:}00}$', '$\\mathdefault{12{:}00}$',
          '$\\mathdefault{16{:}00}$', '$\\mathdefault{20{:}00}$',
          'Jan$\\mathdefault{{-}02}$', '$\\mathdefault{04{:}00}$',
          '$\\mathdefault{08{:}00}$', '$\\mathdefault{12{:}00}$',
          '$\\mathdefault{16{:}00}$']),
        (datetime.timedelta(seconds=2),
         ['$\\mathdefault{59.5}$', '$\\mathdefault{00{:}00}$',
          '$\\mathdefault{00.5}$', '$\\mathdefault{01.0}$',
          '$\\mathdefault{01.5}$', '$\\mathdefault{02.0}$',
          '$\\mathdefault{02.5}$']),
    ])
    def test_concise_formatter_usetex(t_delta, expected):
        d1 = datetime.datetime(1997, 1, 1)
        d2 = d1 + t_delta
    
        locator = mdates.AutoDateLocator(interval_multiples=True)
        locator.create_dummy_axis()
        locator.axis.set_view_interval(mdates.date2num(d1), mdates.date2num(d2))
    
        formatter = mdates.ConciseDateFormatter(locator, usetex=True)
>       assert formatter.format_ticks(locator()) == expected
E       AssertionError: assert ['$\\mathdefa...{02.0}$', ...] == ['$\\mathdefa...{02.0}$', ...]
E         
E         At index 1 diff: '$\\mathdefault{00:00}$' != '$\\mathdefault{00{:}00}$'
E         Use -v to get more diff

lib/matplotlib/tests/test_dates.py:637: AssertionError
==================================== PASSES ====================================
___________________________ test_too_many_date_ticks ___________________________
------------------------------ Captured log call -------------------------------
WARNING  matplotlib.ticker:ticker.py:1634 Locator attempting to generate 1461 ticks ([10246.0, ..., 11706.0]), which exceeds Locator.MAXTICKS (1000).
=========================== short test summary info ============================
PASSED lib/matplotlib/tests/test_dates.py::test_date_numpyx
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[s]-t00]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[s]-t01]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[s]-t02]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[us]-t00]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[us]-t01]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[us]-t02]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ms]-t00]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ms]-t01]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ms]-t02]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ns]-t00]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ns]-t01]
PASSED lib/matplotlib/tests/test_dates.py::test_date_date2num_numpy[datetime64[ns]-t02]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT[datetime64[s]]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT[datetime64[us]]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT[datetime64[ms]]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT[datetime64[ns]]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT_scalar[s]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT_scalar[ms]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT_scalar[us]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_NaT_scalar[ns]
PASSED lib/matplotlib/tests/test_dates.py::test_date_empty
PASSED lib/matplotlib/tests/test_dates.py::test_date_not_empty
PASSED lib/matplotlib/tests/test_dates.py::test_axhline
PASSED lib/matplotlib/tests/test_dates.py::test_date_axhspan[png]
PASSED lib/matplotlib/tests/test_dates.py::test_date_axvspan[png]
PASSED lib/matplotlib/tests/test_dates.py::test_date_axhline[png]
PASSED lib/matplotlib/tests/test_dates.py::test_date_axvline[png]
PASSED lib/matplotlib/tests/test_dates.py::test_too_many_date_ticks
PASSED lib/matplotlib/tests/test_dates.py::test_RRuleLocator[png]
PASSED lib/matplotlib/tests/test_dates.py::test_RRuleLocator_dayrange
PASSED lib/matplotlib/tests/test_dates.py::test_RRuleLocator_close_minmax
PASSED lib/matplotlib/tests/test_dates.py::test_date_formatter_callable
PASSED lib/matplotlib/tests/test_dates.py::test_date_formatter_usetex[delta0-expected0]
PASSED lib/matplotlib/tests/test_dates.py::test_date_formatter_usetex[delta1-expected1]
PASSED lib/matplotlib/tests/test_dates.py::test_drange
PASSED lib/matplotlib/tests/test_dates.py::test_auto_date_locator
PASSED lib/matplotlib/tests/test_dates.py::test_auto_date_locator_intmult
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_subsecond
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta0-1997-Jan-01 00:00]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta1-1997-Jan-01 00:01]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta2-1997-Jan-01]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta3-1997-Jan-02]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta4-1997-Jan]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta5-]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_show_offset[t_delta6-]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_usetex[t_delta0-expected0]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_usetex[t_delta1-expected1]
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_formats
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_zformats
PASSED lib/matplotlib/tests/test_dates.py::test_concise_formatter_tz
PASSED lib/matplotlib/tests/test_dates.py::test_auto_date_locator_intmult_tz
PASSED lib/matplotlib/tests/test_dates.py::test_date_inverted_limit[png]
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_dst
PASSED lib/matplotlib/tests/test_dates.py::test_date2num_dst_pandas
PASSED lib/matplotlib/tests/test_dates.py::test_rrulewrapper
PASSED lib/matplotlib/tests/test_dates.py::test_rrulewrapper_pytz
PASSED lib/matplotlib/tests/test_dates.py::test_yearlocator_pytz
PASSED lib/matplotlib/tests/test_dates.py::test_YearLocator
PASSED lib/matplotlib/tests/test_dates.py::test_DayLocator
PASSED lib/matplotlib/tests/test_dates.py::test_tz_utc
PASSED lib/matplotlib/tests/test_dates.py::test_num2timedelta[1-tdelta0]
PASSED lib/matplotlib/tests/test_dates.py::test_num2timedelta[x1-tdelta1]
PASSED lib/matplotlib/tests/test_dates.py::test_datetime64_in_list
PASSED lib/matplotlib/tests/test_dates.py::test_change_epoch
PASSED lib/matplotlib/tests/test_dates.py::test_warn_notintervals
PASSED lib/matplotlib/tests/test_dates.py::test_change_converter
PASSED lib/matplotlib/tests/test_dates.py::test_change_interval_multiples
PASSED lib/matplotlib/tests/test_dates.py::test_epoch2num
PASSED lib/matplotlib/tests/test_dates.py::test_julian2num
FAILED lib/matplotlib/tests/test_dates.py::test_DateFormatter[png] - matplotl...
FAILED lib/matplotlib/tests/test_dates.py::test_locator_set_formatter - Asser...
FAILED lib/matplotlib/tests/test_dates.py::test_date_formatter_usetex[delta2-expected2]
FAILED lib/matplotlib/tests/test_dates.py::test_date_formatter_usetex[delta3-expected3]
FAILED lib/matplotlib/tests/test_dates.py::test_concise_formatter_usetex[t_delta2-expected2]
FAILED lib/matplotlib/tests/test_dates.py::test_concise_formatter_usetex[t_delta3-expected3]
========================= 6 failed, 71 passed in 5.30s =========================
>>>>> End Test Output
SWEBENCH_TEST_EXIT_CODE=1
