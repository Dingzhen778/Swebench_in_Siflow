>>>>> Start Test Output
+ export PYTHONPATH=/testbed:
+ PYTHONPATH=/testbed:
+ echo PYTHONPATH=/testbed:
PYTHONPATH=/testbed:
+ ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 backends.base.test_client dbshell.test_postgresql
Testing against Django installed in '/testbed/django'
Importing application dbshell
Importing application backends
Found 12 tests.
Skipping setup of unused database(s): default, other.
System check identified no issues (0 silenced).
test_runshell_use_environ (backends.base.test_client.SimpleDatabaseClientTests) ... test_settings_to_cmd_args_env (backends.base.test_client.SimpleDatabaseClientTests) ... ok
test_accent (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_basic (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_column (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_crash_password_does_not_leak (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_nopass (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_parameters (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_passfile (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_service (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR
test_sigint_handler (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
SIGINT is ignored in Python and passed to psql to abort queries. ... skipped 'Requires a PostgreSQL connection'
test_ssl_certificate (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase) ... ERROR

======================================================================
ERROR: test_accent (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 122, in test_accent
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_basic (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 21, in test_basic
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_column (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 106, in test_column
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_crash_password_does_not_leak (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 158, in test_crash_password_does_not_leak
    args, env = self.settings_to_cmd_args_env({'PASSWORD': 'somepassword'}, [])
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_nopass (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 35, in test_nopass
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_parameters (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 136, in test_parameters
    self.settings_to_cmd_args_env({'NAME': 'dbname'}, ['--help']),
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_passfile (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 78, in test_passfile
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_service (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 72, in test_service
    self.settings_to_cmd_args_env({'OPTIONS': {'service': 'django_test'}}),
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
ERROR: test_ssl_certificate (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/dbshell/test_postgresql.py", line 48, in test_ssl_certificate
    self.settings_to_cmd_args_env({
  File "/testbed/tests/dbshell/test_postgresql.py", line 17, in settings_to_cmd_args_env
    return DatabaseClient.settings_to_cmd_args_env(settings_dict, parameters)
  File "/testbed/django/db/backends/postgresql/client.py", line 39, in settings_to_cmd_args_env
    env = dict(os.environ)
NameError: name 'os' is not defined

======================================================================
FAIL: test_runshell_use_environ (backends.base.test_client.SimpleDatabaseClientTests) (env={})
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/tests/backends/base/test_client.py", line 30, in test_runshell_use_environ
    run.assert_called_once_with([], env=None, check=True)
  File "/opt/miniconda3/envs/testbed/lib/python3.8/unittest/mock.py", line 925, in assert_called_once_with
    return self.assert_called_with(*args, **kwargs)
  File "/opt/miniconda3/envs/testbed/lib/python3.8/unittest/mock.py", line 913, in assert_called_with
    raise AssertionError(_error_message()) from cause
AssertionError: expected call not found.
Expected: run([], env=None, check=True)
Actual: run([], env={}, check=True)

----------------------------------------------------------------------
Ran 12 tests in 0.002s

FAILED (failures=1, errors=9, skipped=1)
>>>>> End Test Output
SWEBENCH_TEST_EXIT_CODE=1
