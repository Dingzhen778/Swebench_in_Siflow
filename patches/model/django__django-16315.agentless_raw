```python
### django/db/models/query.py
<<<<<<< SEARCH
        if unique_fields:
            # Primary key is allowed in unique_fields.
            unique_fields = [
                opts.pk.name if name == "pk" else name for name in unique_fields
            ]
=======
        if unique_fields:
            # Primary key is allowed in unique_fields.
            unique_fields = [
                opts.get_field(name).db_column or opts.get_field(name).name if name == "pk" else opts.get_field(name).db_column or opts.get_field(name).name for name in unique_fields
            ]
>>>>>>> REPLACE
```

```python
### django/db/backends/postgresql/operations.py
<<<<<<< SEARCH
            return "ON CONFLICT(%s) DO UPDATE SET %s" % (
                ", ".join(map(self.quote_name, unique_fields)),
                ", ".join(
                    [
                        f"{field} = EXCLUDED.{field}"
                        for field in map(self.quote_name, update_fields)
                    ]
                ),
            )
=======
            return "ON CONFLICT(%s) DO UPDATE SET %s" % (
                ", ".join(map(self.quote_name, unique_fields)),
                ", ".join(
                    [
                        f"{self.quote_name(field)} = EXCLUDED.{self.quote_name(field)}"
                        for field in update_fields
                    ]
                ),
            )
>>>>>>> REPLACE
```