```python
### xarray/core/weighted.py
<<<<<<< SEARCH
        sum_of_weights = self._reduce(mask, self.weights, dim=dim, skipna=False)
=======
        sum_of_weights = self._reduce(mask, self.weights.astype(float), dim=dim, skipna=False)
>>>>>>> REPLACE
```